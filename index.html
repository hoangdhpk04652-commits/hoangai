<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Công Nghệ AI - Khám phá Tương lai & Tra cứu</title>
    <!-- SEO OPTIMIZATION -->
    <meta name="description" content="Khám phá và tra cứu thông tin AI mới nhất bằng công cụ tìm kiếm tích hợp Google Gemini. Website giới thiệu bởi Đặng Huy Hoàng, sinh viên FPT Polytechnic Buôn Mê Thuật (PK04652).">
    <meta name="keywords" content="AI, Trí tuệ Nhân tạo, Công nghệ, FPT Polytechnic, Buôn Mê Thuật, Đặng Huy Hoàng, Tra cứu AI, Gemini API, CMS, SEO, Quản trị">
    <!-- Tải Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
    <!-- Cấu hình Tailwind -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'primary': '#007bff', // Màu xanh dương chủ đạo
                        'secondary': '#6c757d', // Màu xám phụ
                        'accent': '#1e3a8a', // Xanh đậm cho chi tiết
                        'success': '#10b981', // Màu xanh lá cho báo cáo tốt
                        'warning': '#f59e0b', // Màu vàng cho cảnh báo
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style>
        /* Đảm bảo font Inter được áp dụng và thêm Transition cho UX */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7f7f7;
            color: #1f2937;
            transition: background-color 0.3s, color 0.3s;
        }
        /* Mock Dark Mode Styles (UX Enhancement) */
        .dark-mode {
            background-color: #1a202c; 
            color: #f7fafc; 
        }
        .dark-mode .section-title::after {
            background-color: #4299e1; 
        }
        .dark-mode .bg-white, .dark-mode .bg-gray-50, .dark-mode .bg-gray-100 {
            background-color: #2d3748; 
            color: #f7fafc;
        }
        .dark-mode .bg-gray-200 {
            background-color: #1a202c;
        }
        .dark-mode .text-gray-600, .dark-mode .text-gray-700 {
            color: #cbd5e0;
        }
        .dark-mode .text-gray-500 {
            color: #a0aec0;
        }
        .dark-mode .author-card-bg {
             background: linear-gradient(135deg, #007bff 0%, #1e3a8a 100%);
        }
        /* End Mock Dark Mode Styles */

        .section-title {
            position: relative;
            padding-bottom: 0.5rem;
        }
        .section-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 4px;
            background-color: #007bff;
            border-radius: 2px;
        }
        .author-card-bg {
            background: linear-gradient(135deg, #1e3a8a 0%, #007bff 100%);
        }
        /* CSS cho chế độ chỉnh sửa CMS (Mock) */
        .cms-active .editable-content {
            border: 2px dashed #ef4444 !important; /* Màu đỏ cho dễ nhận biết */
            padding: 8px;
            border-radius: 6px;
            cursor: pointer;
            transition: border-color 0.3s;
        }
        .cms-active .editable-content:hover {
            border-color: #f87171 !important;
        }
    </style>
</head>
<body class="antialiased">

    <!-- Header / Navigation -->
    <header class="bg-white shadow-md sticky top-0 z-10">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center">
            <a href="#" class="text-2xl font-bold text-accent">AI Insights</a>
            <div class="flex items-center space-x-6">
                <nav class="hidden md:flex space-x-8">
                    <a href="#hero" class="text-gray-600 hover:text-primary transition duration-300">Tổng quan</a>
                    <a href="#lookup" class="text-gray-600 hover:text-primary transition duration-300">Tra cứu AI</a>
                    <a href="#testimonials" class="text-gray-600 hover:text-primary transition duration-300">Nhận định</a>
                    <a href="#author" class="text-gray-600 hover:text-primary transition duration-300">Về Tác giả</a>
                    <!-- Admin Link -->
                    <a href="#admin-panel" class="text-primary hover:text-accent transition duration-300 font-bold">Quản trị</a>
                </nav>
                
                <!-- Mock Role Display (Phân quyền) -->
                <span class="text-sm font-medium text-success bg-success/10 px-3 py-1 rounded-full border border-success/50 hidden lg:inline-block" id="user-role-mock">
                    Vai trò: Admin (PK04652)
                </span>
                
                <!-- Mobile Menu Button (Placeholder) -->
                <button class="md:hidden text-gray-600 hover:text-primary focus:outline-none">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
                </button>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section id="hero" class="bg-gray-900 text-white py-20 md:py-32">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <h1 class="text-4xl sm:text-6xl font-extrabold mb-4 leading-tight editable-content" data-cms="hero-title">
                Trí Tuệ Nhân Tạo: Định Hình Tương Lai
            </h1>
            <p class="text-xl sm:text-2xl text-gray-300 mb-8 max-w-3xl mx-auto editable-content" data-cms="hero-subtitle">
                Khám phá những tiến bộ đột phá, các ứng dụng thực tế và tiềm năng vô hạn của công nghệ AI.
            </p>
            <a href="#lookup" class="inline-block bg-primary hover:bg-blue-600 text-white font-bold py-3 px-8 rounded-full shadow-lg transition duration-300 transform hover:scale-105">
                Tra cứu thông tin AI ngay
            </a>
        </div>
    </section>

    <!-- AI Lookup Section -->
    <section id="lookup" class="py-16 md:py-24 bg-white">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
            <h2 class="text-3xl md:text-4xl font-bold text-center mb-12 section-title">Tra Cứu Thông Tin AI & Công Nghệ</h2>

            <!-- Input Form -->
            <div class="bg-gray-100 p-6 rounded-xl shadow-inner mb-8">
                <label for="query" class="block text-lg font-semibold mb-2 text-accent">Nhập câu hỏi của bạn về AI:</label>
                <!-- Tra cứu AI luôn có sẵn cho người dùng và admin -->
                <textarea id="query" rows="3" class="w-full p-4 border border-gray-300 rounded-lg focus:ring-primary focus:border-primary transition duration-150" placeholder="Ví dụ: Công nghệ AI mới nhất là gì?"></textarea>
                <button onclick="fetchAiContent()" class="mt-4 w-full md:w-auto bg-primary hover:bg-blue-600 text-white font-bold py-3 px-6 rounded-lg shadow-md transition duration-300 transform hover:scale-[1.01]">
                    Tra Cứu (Sử dụng Google Gemini)
                </button>
            </div>

            <!-- Results Display -->
            <div id="results" class="bg-white p-6 rounded-xl shadow-lg border border-gray-200 min-h-[200px] flex flex-col justify-center items-center">
                <div id="loading" class="hidden text-center">
                    <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-primary mb-3"></div>
                    <p class="text-primary font-medium">Đang tìm kiếm thông tin mới nhất...</p>
                </div>
                <div id="content-display" class="w-full hidden">
                    <h3 class="text-2xl font-bold text-accent mb-4 border-b pb-2">Kết Quả Tra Cứu</h3>
                    <div id="generated-text" class="text-gray-700 leading-relaxed space-y-4"></div>
                    
                    <!-- Citations will be added here -->
                    <div id="citations" class="mt-6 pt-4 border-t border-gray-200"></div>
                </div>
                <p id="initial-message" class="text-gray-500 italic">Kết quả tra cứu sẽ hiển thị ở đây.</p>
            </div>

        </div>
    </section>

    <!-- Features Section -->
    <section id="features" class="py-16 md:py-24 bg-gray-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <h2 class="text-3xl md:text-4xl font-bold text-center mb-12 section-title">Các Khía Cạnh Đột Phá của AI</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">

                <!-- Feature 1: Machine Learning -->
                <div class="bg-white p-6 rounded-xl shadow-lg hover:shadow-2xl transition duration-300 border border-gray-100 editable-content" data-cms="feature-1">
                    <div class="flex items-center justify-center w-12 h-12 bg-primary/20 text-primary rounded-full mb-4">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"></path></svg>
                    </div>
                    <h3 class="text-xl font-semibold mb-3 text-accent">Học Máy (Machine Learning)</h3>
                    <p class="text-gray-600">Nền tảng của AI hiện đại, cho phép các hệ thống học hỏi từ dữ liệu, nhận dạng mẫu và đưa ra dự đoán mà không cần lập trình rõ ràng.</p>
                </div>

                <!-- Feature 2: Computer Vision -->
                <div class="bg-white p-6 rounded-xl shadow-lg hover:shadow-2xl transition duration-300 border border-gray-100 editable-content" data-cms="feature-2">
                    <div class="flex items-center justify-center w-12 h-12 bg-primary/20 text-primary rounded-full mb-4">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.55 4.55a2 2 0 010 2.83l-4.55 4.55a2 2 0 01-2.83 0l-4.55-4.55a2 2 0 010-2.83l4.55-4.55a2 2 0 012.83 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 11l-3 3M15 17l3-3"></path></svg>
                    </div>
                    <h3 class="text-xl font-semibold mb-3 text-accent">Thị Giác Máy Tính (Vision)</h3>
                    <p class="text-gray-600">Giúp máy tính "nhìn" và hiểu thế giới trực quan, ứng dụng trong xe tự lái, nhận dạng khuôn mặt và kiểm tra chất lượng sản phẩm.</p>
                </div>

                <!-- Feature 3: NLP -->
                <div class="bg-white p-6 rounded-xl shadow-lg hover:shadow-2xl transition duration-300 border border-gray-100 editable-content" data-cms="feature-3">
                    <div class="flex items-center justify-center w-12 h-12 bg-primary/20 text-primary rounded-full mb-4">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 8h10M7 12h10M7 16h6M17 21v-7a2 2 0 00-2-2H9a2 2 0 00-2 2v7"></path></svg>
                    </div>
                    <h3 class="text-xl font-semibold mb-3 text-accent">Xử Lý Ngôn Ngữ Tự Nhiên (NLP)</h3>
                    <p class="text-gray-600">Cho phép máy tính giao tiếp, đọc hiểu, dịch và tạo ra ngôn ngữ tự nhiên, là cốt lõi của chatbot và trợ lý ảo.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Testimonials/Quotes Section -->
    <section id="testimonials" class="py-16 md:py-24 bg-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <h2 class="text-3xl md:text-4xl font-bold text-center mb-12 section-title">Nhận Định & Trích Dẫn về AI</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                
                <!-- Quote 1 -->
                <div class="bg-gray-50 p-6 rounded-xl shadow-md border-t-4 border-primary/50 editable-content" data-cms="quote-1">
                    <p class="italic text-gray-700 mb-4">"AI sẽ không thay thế con người, nhưng những người sử dụng AI sẽ thay thế những người không sử dụng."</p>
                    <div class="font-semibold text-accent">- Jensen Huang, CEO NVIDIA</div>
                </div>

                <!-- Quote 2 -->
                <div class="bg-gray-50 p-6 rounded-xl shadow-md border-t-4 border-primary/50 editable-content" data-cms="quote-2">
                    <p class="italic text-gray-700 mb-4">"Bất kỳ tổ chức nào cố gắng tối ưu hóa dựa trên dữ liệu mà không sử dụng AI, đều đang tối ưu hóa một cách kém hiệu quả."</p>
                    <div class="font-semibold text-accent">- Andrew Ng, Lãnh đạo AI</div>
                </div>

                <!-- Quote 3 -->
                <div class="bg-gray-50 p-6 rounded-xl shadow-md border-t-4 border-primary/50 editable-content" data-cms="quote-3">
                    <p class="italic text-gray-700 mb-4">"Tương lai của AI không phải là tạo ra một siêu trí tuệ, mà là tạo ra một công cụ hỗ trợ cho con người."</p>
                    <div class="font-semibold text-accent">- Yann LeCun, Trưởng nhóm AI tại Meta</div>
                </div>
            </div>
        </div>
    </section>

    <!-- About Author Section -->
    <section id="author" class="py-16 md:py-24 bg-gray-100">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <h2 class="text-3xl md:text-4xl font-bold text-center mb-12 section-title">Về Tác giả Website</h2>
            
            <div class="max-w-2xl mx-auto author-card-bg p-8 md:p-12 rounded-2xl shadow-xl text-white">
                <div class="flex flex-col md:flex-row items-center md:items-start gap-8">
                    
                    <!-- Profile Image / Logo -->
                    <div class="flex-shrink-0">
                        <!-- HÌNH ẢNH PROFILE: Placeholder cho logo trường FPT Poly hoặc ảnh profile -->
                        <img id="profile-image" src="https://placehold.co/150x150/1e3a8a/ffffff?text=FPT+Poly" 
                             alt="Hình ảnh đại diện/Logo Đặng Huy Hoàng"
                             class="w-36 h-36 rounded-full border-4 border-white object-cover shadow-lg">
                    </div>

                    <!-- Author Details -->
                    <div class="flex-grow text-center md:text-left">
                        <h3 class="text-3xl font-bold mb-2">Đặng Huy Hoàng</h3>
                        <p class="text-xl font-medium text-blue-200 mb-4">Sinh viên Công nghệ Thông tin</p>
                        
                        <div class="space-y-2 text-lg">
                            <p>
                                <span class="font-semibold text-blue-100">Trường:</span> FPT Polytechnic
                            </p>
                            <p>
                                <span class="font-semibold text-blue-100">Mã số sinh viên:</span> PK04652
                            </p>
                            <p>
                                <span class="font-semibold text-blue-100">Cơ sở:</span> Thành phố Buôn Mê Thuật
                            </p>
                        </div>

                        <p class="mt-6 text-gray-200 italic editable-content" data-cms="author-quote">
                            "Với niềm đam mê công nghệ và Trí tuệ Nhân tạo, tôi mong muốn tạo ra những giải pháp kỹ thuật tiên tiến, góp phần vào sự phát triển của cộng đồng và ngành công nghiệp 4.0."
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Admin Panel Section (CMS, SEO, Thống kê, Phân quyền Mock-up) -->
    <section id="admin-panel" class="py-16 md:py-24 bg-gray-900 text-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <h2 class="text-3xl md:text-4xl font-bold text-center mb-12 section-title text-white">Bảng Điều Khiển Quản Trị (Admin Mock-up)</h2>

            <!-- 1. CÔNG CỤ TÙY CHỈNH (UX/CMS Mock) -->
            <div class="bg-gray-800 p-6 rounded-xl shadow-lg mb-8 border-l-4 border-primary">
                <h3 class="text-2xl font-semibold text-primary mb-4">Tùy chỉnh Giao diện & Nội dung (CMS)</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    
                    <!-- Chế độ Chỉnh sửa CMS -->
                    <div class="flex items-center space-x-4 bg-gray-700 p-4 rounded-lg">
                        <label for="editModeToggle" class="text-white font-medium flex-grow">Chế độ Chỉnh sửa CMS (Mock):</label>
                        <button id="editModeToggle" class="relative inline-flex flex-shrink-0 h-6 w-11 border-2 border-transparent rounded-full cursor-pointer transition-colors ease-in-out duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 bg-gray-400" role="switch" aria-checked="false" onclick="toggleEditModeMock()">
                            <span aria-hidden="true" class="pointer-events-none inline-block h-5 w-5 rounded-full bg-white shadow transform ring-0 transition ease-in-out duration-200 translate-x-0"></span>
                        </button>
                    </div>
                    
                    <!-- Chế độ tối (Dark Mode) -->
                    <div class="flex items-center space-x-4 bg-gray-700 p-4 rounded-lg">
                        <label for="themeToggle" class="text-white font-medium flex-grow">Chế độ tối (Dark Mode) (UX):</label>
                        <button id="themeToggle" class="relative inline-flex flex-shrink-0 h-6 w-11 border-2 border-transparent rounded-full cursor-pointer transition-colors ease-in-out duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary bg-gray-400" role="switch" aria-checked="false" onclick="toggleThemeMock()">
                            <span aria-hidden="true" class="pointer-events-none inline-block h-5 w-5 rounded-full bg-white shadow transform ring-0 transition ease-in-out duration-200 translate-x-0"></span>
                        </button>
                    </div>

                    <!-- Quản lý Nội dung Bài viết (Mock) -->
                    <button onclick="console.log('Mock: Đã mở giao diện Quản lý Bài viết & Danh mục')" class="col-span-1 md:col-span-2 bg-gray-600 hover:bg-primary transition duration-300 text-white font-bold py-3 px-4 rounded-lg">
                        Quản lý Bài viết & Danh mục (Dễ dàng cập nhật)
                    </button>
                </div>
            </div>

            <!-- 2. BÁO CÁO & THỐNG KÊ (Mock) -->
            <div class="bg-gray-800 p-6 rounded-xl shadow-lg mb-8 border-l-4 border-success">
                <h3 class="text-2xl font-semibold text-success mb-4">Báo cáo & Thống kê Truy cập (Mock)</h3>
                <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 text-center">
                    
                    <!-- Metric 1: Tổng truy cập -->
                    <div class="bg-gray-700 p-4 rounded-lg">
                        <p class="text-3xl font-bold text-white">4,890</p>
                        <p class="text-sm text-gray-400">Tổng Truy Cập Tháng</p>
                    </div>
                    
                    <!-- Metric 2: Tỷ lệ thoát -->
                    <div class="bg-gray-700 p-4 rounded-lg">
                        <p class="text-3xl font-bold text-warning">28.5%</p>
                        <p class="text-sm text-gray-400">Tỷ Lệ Thoát (Hành vi người dùng)</p>
                    </div>

                    <!-- Metric 3: Tốc độ tải trang (UX) -->
                    <div class="bg-gray-700 p-4 rounded-lg">
                        <p class="text-3xl font-bold text-success">1.5s</p>
                        <p class="text-sm text-gray-400">Tốc Độ Tải Trang (SEO & UX)</p>
                    </div>
                </div>
            </div>

            <!-- 3. TỐI ƯU HÓA CÔNG CỤ TÌM KIẾM (SEO Mock) -->
            <div class="bg-gray-800 p-6 rounded-xl shadow-lg mb-8 border-l-4 border-warning">
                <h3 class="text-2xl font-semibold text-warning mb-4">Tối ưu hóa Công cụ Tìm kiếm (SEO)</h3>
                <div class="space-y-3">
                    <p class="text-lg font-semibold flex justify-between items-center">
                        Điểm SEO Chung: 
                        <span class="bg-success text-white text-sm font-bold px-3 py-1 rounded-full">Tốt (92/100)</span>
                    </p>
                    <p>
                        <span class="font-medium text-gray-300">Cấu trúc URL:</span> Đã tối ưu (Thân thiện, không ID phức tạp)
                    </p>
                    <p>
                        <span class="font-medium text-gray-300">Thẻ Meta/Mô tả:</span> Đã đầy đủ và đúng chuẩn
                    </p>
                    <div class="flex space-x-4">
                        <button onclick="console.log('Mock: Đang tạo lại Sitemap.xml...')" class="text-primary hover:underline">Tạo lại Sitemap.xml</button>
                        <button onclick="console.log('Mock: Đã kiểm tra Robots.txt thành công')" class="text-primary hover:underline">Kiểm tra Robots.txt</button>
                    </div>
                </div>
            </div>

            <!-- 4. PHÂN QUYỀN NGƯỜI DÙNG (Mock) -->
            <div class="bg-gray-800 p-6 rounded-xl shadow-lg border-l-4 border-accent">
                <h3 class="text-2xl font-semibold text-accent mb-4">Quản lý Phân quyền Người dùng (Mock)</h3>
                <table class="w-full text-left table-auto">
                    <thead>
                        <tr class="text-gray-400 border-b border-gray-700">
                            <th class="py-2">Tên</th>
                            <th class="py-2">MSSV/ID</th>
                            <th class="py-2">Vai trò</th>
                            <th class="py-2">Hành động</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Vai trò Admin (Đặng Huy Hoàng) -->
                        <tr class="border-b border-gray-700">
                            <td class="py-3">Đặng Huy Hoàng</td>
                            <td class="py-3">PK04652</td>
                            <td class="py-3"><span class="bg-success text-white px-3 py-1 text-xs rounded-full">Admin</span></td>
                            <td class="py-3"><button onclick="console.log('Mock: Đã mở hồ sơ PK04652 để chỉnh sửa quyền')" class="text-primary hover:text-blue-400">Chỉnh sửa</button></td>
                        </tr>
                        <!-- Vai trò Editor -->
                        <tr>
                            <td class="py-3">User Test</td>
                            <td class="py-3">ED99999</td>
                            <td class="py-3"><span class="bg-warning text-gray-800 px-3 py-1 text-xs rounded-full">Editor</span></td>
                            <td class="py-3"><button onclick="console.log('Mock: Đã mở hồ sơ ED99999 để chỉnh sửa quyền')" class="text-primary hover:text-blue-400">Chỉnh sửa</button></td>
                        </tr>
                    </tbody>
                </table>
            </div>

        </div>
    </section>
    <!-- END: Admin Panel Section -->

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-6">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <p>&copy; 2024 AI Insights. Trang web được tạo bởi Đặng Huy Hoàng.</p>
            <div class="mt-2 text-sm text-gray-400">
                Sinh viên FPT Polytechnic - PK04652
            </div>
        </div>
    </footer>

    <script>
        // Hàm chuyển đổi Markdown sang HTML (đơn giản)
        function markdownToHtml(markdown) {
            // Chuyển đổi tiêu đề h3
            markdown = markdown.replace(/^### (.*$)/gim, '<h3>$1</h3>');
            // Chuyển đổi tiêu đề h2
            markdown = markdown.replace(/^## (.*$)/gim, '<h2>$1</h2>');
            // Chuyển đổi in đậm
            markdown = markdown.replace(/\*\*(.*)\*\*/gim, '<strong>$1</strong>');
            // Chuyển đổi đoạn văn bản
            markdown = markdown.replace(/\n/g, '<br>');
            return markdown;
        }

        // Hàm gọi API Gemini
        async function fetchAiContent() {
            const queryElement = document.getElementById('query');
            const generatedTextElement = document.getElementById('generated-text');
            const citationsElement = document.getElementById('citations');
            const loadingElement = document.getElementById('loading');
            const contentDisplayElement = document.getElementById('content-display');
            const initialMessageElement = document.getElementById('initial-message');
            
            const userQuery = queryElement.value.trim();
            if (!userQuery) return; // Không làm gì nếu query rỗng

            // Ẩn nội dung cũ, hiển thị loading
            initialMessageElement.classList.add('hidden');
            contentDisplayElement.classList.add('hidden');
            loadingElement.classList.remove('hidden');
            generatedTextElement.innerHTML = '';
            citationsElement.innerHTML = '';

            const apiKey = ""; 
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;

            // Tạo payload với Google Search Grounding
            const payload = {
                contents: [{ parts: [{ text: userQuery }] }],
                // Bật Google Search để tra cứu thông tin mới nhất
                tools: [{ "google_search": {} }],
                // Định hướng phản hồi
                systemInstruction: {
                    parts: [{ text: "Act as a helpful and informative AI expert. Provide a detailed, easy-to-understand explanation in Vietnamese, ensuring the information is current and accurate." }]
                },
            };

            const maxRetries = 3;
            let currentRetry = 0;
            let response;
            let result;

            // Thực hiện gọi API với Exponential Backoff
            while (currentRetry < maxRetries) {
                try {
                    response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    if (!response.ok) {
                        if (response.status === 429) { // Rate limit or transient error
                            throw new Error('API Rate Limit Exceeded or Temporary Error');
                        }
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }

                    result = await response.json();
                    break; // Thành công, thoát vòng lặp
                } catch (error) {
                    console.error("API call failed:", error);
                    currentRetry++;
                    if (currentRetry >= maxRetries) {
                        // Thất bại sau khi retry
                        generatedTextElement.innerHTML = '<p class="text-red-600">Xin lỗi, không thể tra cứu thông tin AI lúc này. Vui lòng thử lại sau.</p>';
                        loadingElement.classList.add('hidden');
                        contentDisplayElement.classList.remove('hidden');
                        return;
                    }
                    // Chờ đợi trước khi retry (1s, 2s, 4s)
                    const delay = Math.pow(2, currentRetry) * 1000;
                    await new Promise(resolve => setTimeout(resolve, delay));
                }
            }

            // Xử lý kết quả
            const candidate = result?.candidates?.[0];
            
            loadingElement.classList.add('hidden');

            if (candidate && candidate.content?.parts?.[0]?.text) {
                const text = candidate.content.parts[0].text;
                
                // Hiển thị văn bản kết quả
                generatedTextElement.innerHTML = markdownToHtml(text);
                
                // Xử lý nguồn trích dẫn (Citations)
                let sources = [];
                const groundingMetadata = candidate.groundingMetadata;
                if (groundingMetadata && groundingMetadata.groundingAttributions) {
                    sources = groundingMetadata.groundingAttributions
                        .map(attribution => ({
                            uri: attribution.web?.uri,
                            title: attribution.web?.title,
                        }))
                        .filter(source => source.uri && source.title);
                }

                if (sources.length > 0) {
                    citationsElement.innerHTML = '<p class="font-semibold text-sm text-gray-500 mb-2">Nguồn trích dẫn:</p>';
                    const ul = document.createElement('ul');
                    ul.className = 'list-disc list-inside text-sm text-gray-600 space-y-1';
                    sources.forEach((source) => {
                        const li = document.createElement('li');
                        li.innerHTML = `<a href="${source.uri}" target="_blank" class="text-primary hover:underline">${source.title}</a>`;
                        ul.appendChild(li);
                    });
                    citationsElement.appendChild(ul);
                } else {
                    citationsElement.innerHTML = '<p class="text-sm text-gray-500 italic">Không có nguồn trích dẫn cụ thể được tìm thấy.</p>';
                }

                contentDisplayElement.classList.remove('hidden');
                queryElement.value = ''; // Xóa query sau khi thành công

            } else {
                generatedTextElement.innerHTML = '<p class="text-red-600">Không thể tạo câu trả lời cho câu hỏi của bạn. Vui lòng thử lại với một câu hỏi khác.</p>';
                contentDisplayElement.classList.remove('hidden');
            }
        }

        // Mock function for theme toggling (UX/Quản trị)
        function toggleThemeMock() {
            const body = document.body;
            const toggleButton = document.getElementById('themeToggle');
            const isDarkMode = body.classList.toggle('dark-mode'); 

            if (isDarkMode) {
                toggleButton.classList.remove('bg-gray-400');
                toggleButton.classList.add('bg-primary');
                toggleButton.children[0].classList.remove('translate-x-0');
                toggleButton.children[0].classList.add('translate-x-5');
                console.log("Mock Dark Mode ON - Tùy chỉnh UX được áp dụng");
            } else {
                toggleButton.classList.remove('bg-primary');
                toggleButton.classList.add('bg-gray-400');
                toggleButton.children[0].classList.remove('translate-x-5');
                toggleButton.children[0].classList.add('translate-x-0');
                console.log("Mock Dark Mode OFF - Trở về giao diện mặc định");
            }
        }

        // Mock function for CMS Edit Mode Toggling (Chức năng quản trị CMS)
        function toggleEditModeMock() {
            const body = document.body;
            const editButton = document.getElementById('editModeToggle');
            const isEditing = editButton.getAttribute('aria-checked') === 'false';

            const adminRole = document.getElementById('user-role-mock');

            if (isEditing) {
                // Chỉ cho phép chế độ chỉnh sửa nếu vai trò là Admin (Mock)
                if (adminRole && adminRole.textContent.includes('Admin')) {
                    body.classList.add('cms-active');
                    editButton.setAttribute('aria-checked', 'true');
                    editButton.classList.remove('bg-gray-400');
                    editButton.classList.add('bg-red-500');
                    editButton.children[0].classList.remove('translate-x-0');
                    editButton.children[0].classList.add('translate-x-5');
                    
                    // Thêm event listener để mô phỏng chỉnh sửa trực tiếp
                    document.querySelectorAll('.editable-content').forEach(el => {
                        el.onclick = function() {
                            const newContent = prompt(`Chỉnh sửa nội dung cho ${el.dataset.cms}:`, el.textContent.trim());
                            if (newContent !== null) {
                                el.textContent = newContent;
                                console.log(`Mock CMS: Nội dung "${el.dataset.cms}" đã được cập nhật.`);
                            }
                        };
                    });

                    console.log("Mock CMS Edit Mode ON. Click vào các khu vực nội dung viền đỏ để chỉnh sửa.");
                } else {
                     console.log("Mock CMS: Chỉ Admin mới có quyền chỉnh sửa.");
                }
            } else {
                body.classList.remove('cms-active');
                editButton.setAttribute('aria-checked', 'false');
                editButton.classList.remove('bg-red-500');
                editButton.classList.add('bg-gray-400');
                editButton.children[0].classList.remove('translate-x-5');
                editButton.children[0].classList.add('translate-x-0');

                // Xóa event listener
                document.querySelectorAll('.editable-content').forEach(el => {
                    el.onclick = null;
                });

                console.log("Mock CMS Edit Mode OFF. Nội dung đã trở về chế độ xem.");
            }
        }

        // Smooth scrolling cho các liên kết điều hướng
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                document.querySelector(this.getAttribute('href')).scrollIntoView({
                    behavior: 'smooth'
                });
            });
        });
    </script>
</body>
</html>
